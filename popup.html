<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ShieldWallet</title>
  <link rel="stylesheet" href="styles/popup.css">
</head>
<body>
  <div class="container">
    <main>
      <!-- 初始化/登录界面 -->
      <div class="screen" id="welcomeScreen">
        <div class="welcome-content">
          <h2>欢迎使用ShieldWallet</h2>
          <div class="btn-group">
            <button id="createWalletBtn" class="btn btn-primary">创建钱包</button>
            <button id="importWalletBtn" class="btn btn-secondary">导入钱包</button>
          </div>
        </div>
      </div>

      <!-- 钱包主页面 -->
      <div class="screen hidden" id="walletScreen">
        <!-- 顶部账户信息 -->
        <div class="wallet-header">
          <div class="wallet-info">
            <div class="wallet-icon">
              <img src="assets/icon48.svg" alt="Wallet" class="wallet-avatar">
            </div>
            <div class="wallet-details">
              <div class="wallet-name">钱包 01</div>
              <div class="account-name">账户 02 <span class="dropdown-arrow">▼</span></div>
            </div>
          </div>
          <div class="header-actions">
            <button class="header-btn" id="copyBtn">📋</button>
            <button class="header-btn" id="settingsBtn">⚙️</button>
            <button class="header-btn" id="networkBtn">🌐</button>
          </div>
        </div>

        <!-- 余额显示 -->
        <div class="balance-section">
          <div class="main-balance" id="mainBalance">$0.00</div>
          <div class="balance-change">
            <span class="change-amount" id="changeAmount">$0.00 (0.00%)</span>
            <span class="time-period">1 日 <span class="dropdown-arrow">▼</span></span>
          </div>
        </div>

        <!-- 功能按钮 -->
        <div class="action-grid">
          <div class="action-item" id="sendBtn">
            <div class="action-icon">↑</div>
            <div class="action-label">发送</div>
          </div>
          <div class="action-item" id="receiveBtn">
            <div class="action-icon">↓</div>
            <div class="action-label">接收</div>
          </div>
          <div class="action-item" id="swapBtn">
            <div class="action-icon">⇄</div>
            <div class="action-label">兑换</div>
          </div>
          <div class="action-item" id="historyBtn">
            <div class="action-icon">📋</div>
            <div class="action-label">交易历史</div>
          </div>
          <div class="action-item" id="toolsBtn">
            <div class="action-icon">🔧</div>
            <div class="action-label">工具集</div>
          </div>
        </div>

        <!-- 标签页 -->
        <div class="tab-navigation">
          <div class="tab-item active" data-tab="tokens">币种</div>
          <div class="tab-item" data-tab="defi">DeFi</div>
          <div class="tab-item" data-tab="nft">NFT</div>
          <div class="tab-item" data-tab="approvals">授权</div>
        </div>

        <!-- 资产内容 -->
        <div class="tab-content">
          <div class="tab-pane active" id="tokensTab">
            <div class="assets-header">
              <div class="assets-title">资产总值</div>
              <div class="assets-value" id="totalAssets">$0.00</div>
            </div>
            <div class="token-list" id="tokenList">
              <!-- 代币列表 -->
              <div class="token-item">
                <div class="token-info">
                  <div class="token-icon eth-icon">Ξ</div>
                  <div class="token-details">
                    <div class="token-name">SEPOLIA_ETH</div>
                    <div class="token-price">$0.00 0.00%</div>
                  </div>
                </div>
                <div class="token-balance">
                  <div class="balance-amount">0.042416</div>
                  <div class="balance-value">$0.00</div>
                </div>
              </div>
              <div class="token-item">
                <div class="token-info">
                  <div class="token-icon usdt-icon">₮</div>
                  <div class="token-details">
                    <div class="token-name">USDT</div>
                    <div class="token-price">$0.99 0.00%</div>
                  </div>
                </div>
                <div class="token-balance">
                  <div class="balance-amount">0</div>
                  <div class="balance-value">$0.00</div>
                </div>
              </div>
              <div class="token-item">
                <div class="token-info">
                  <div class="token-icon usdc-icon">$</div>
                  <div class="token-details">
                    <div class="token-name">USDC</div>
                    <div class="token-price">$0.99 0.00%</div>
                  </div>
                </div>
                <div class="token-balance">
                  <div class="balance-amount">0</div>
                  <div class="balance-value">$0.00</div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane" id="defiTab">
            <div class="empty-state">暂无DeFi资产</div>
          </div>
          <div class="tab-pane" id="nftTab">
            <div class="empty-state">暂无NFT资产</div>
          </div>
          <div class="tab-pane" id="approvalsTab">
            <div class="empty-state">暂无授权记录</div>
          </div>
        </div>
      </div>

      <!-- 创建钱包页面 -->
      <div class="screen hidden" id="createWalletScreen">
        <h2>创建新钱包</h2>
        <form id="createWalletForm">
          <div class="form-group">
            <label for="newPassword">设置密码</label>
            <input type="password" id="newPassword" required>
          </div>
          <div class="form-group">
            <label for="confirmPassword">确认密码</label>
            <input type="password" id="confirmPassword" required>
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-secondary" id="backFromCreateBtn">返回</button>
            <button type="submit" class="btn btn-primary">创建</button>
          </div>
        </form>
      </div>

      <!-- 导入钱包页面 -->
      <div class="screen hidden" id="importWalletScreen">
        <h2>导入钱包</h2>
        <form id="importWalletForm">
          <div class="form-group">
            <label for="importType">导入方式</label>
            <select id="importType">
              <option value="mnemonic">助记词</option>
              <option value="privateKey">私钥</option>
            </select>
          </div>
          <div class="form-group" id="mnemonicInputGroup">
            <label for="mnemonic">助记词</label>
            <textarea id="mnemonic" rows="3" placeholder="请输入12个单词，以空格分隔"></textarea>
          </div>
          <div class="form-group hidden" id="privateKeyInputGroup">
            <label for="privateKey">私钥</label>
            <input type="text" id="privateKey" placeholder="请输入以0x开头的私钥">
          </div>
          <div class="form-group">
            <label for="importPassword">设置密码</label>
            <input type="password" id="importPassword" required>
          </div>
          <div class="form-group">
            <label for="importConfirmPassword">确认密码</label>
            <input type="password" id="importConfirmPassword" required>
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-secondary" id="backFromImportBtn">返回</button>
            <button type="submit" class="btn btn-primary">导入</button>
          </div>
        </form>
      </div>

      <!-- 发送交易页面 -->
      <div class="screen hidden" id="sendScreen">
        <h2>发送资产</h2>
        <form id="sendForm">
          <div class="form-group">
            <label for="recipientAddress">收款地址</label>
            <input type="text" id="recipientAddress" placeholder="0x..." required>
          </div>
          <div class="form-group">
            <label for="amount">金额</label>
            <input type="number" id="amount" step="0.000001" min="0" required>
            <select id="assetSelect">
              <option value="ETH">ETH</option>
              <!-- 其他代币将通过JavaScript动态填充 -->
            </select>
          </div>
          <div class="form-group">
            <label for="gasPrice">Gas价格 (Gwei)</label>
            <input type="number" id="gasPrice" value="5" min="1" required>
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-secondary" id="backFromSendBtn">取消</button>
            <button type="submit" class="btn btn-primary">发送</button>
          </div>
        </form>
      </div>

      <!-- 接收页面 -->
      <div class="screen hidden" id="receiveScreen">
        <h2>接收资产</h2>
        <div class="qr-container">
          <div id="addressQRCode"></div>
        </div>
        <div class="address-container">
          <p>您的钱包地址:</p>
          <div class="address-box">
            <span id="fullAddress">0x0000000000000000000000000000000000000000</span>
            <button id="copyFullAddressBtn" class="icon-btn">📋</button>
          </div>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-secondary" id="backFromReceiveBtn">返回</button>
        </div>
      </div>
    </main>

    <footer>
      <div class="network-selector">
        <select id="networkSelect">
          <option value="1">以太坊主网</option>
          <option value="11155111">Sepolia测试网</option>
          <option value="5">Goerli测试网</option>
        </select>
      </div>
    </footer>
  </div>

  <script src="scripts/popup.js"></script>
  <script>
    // 临时调试代码
    document.addEventListener('DOMContentLoaded', () => {
      console.log('临时调试: DOM已加载');
      const createBtn = document.getElementById('createWalletBtn');
      const importBtn = document.getElementById('importWalletBtn');
      console.log('临时调试: 创建按钮', createBtn);
      console.log('临时调试: 导入按钮', importBtn);
      
      if (createBtn) {
        createBtn.onclick = function() {
          console.log('临时调试: 创建钱包按钮被点击!');
          alert('创建钱包按钮工作正常!');
        };
      }
      
      if (importBtn) {
        importBtn.onclick = function() {
          console.log('临时调试: 导入钱包按钮被点击!');
          alert('导入钱包按钮工作正常!');
        };
      }
    });
  </script>
</body>
</html>